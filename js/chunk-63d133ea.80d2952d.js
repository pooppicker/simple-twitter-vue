(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63d133ea"],{af1f:function(s,e,t){"use strict";t("e0a3")},ce99:function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"container setting-content"},[e("div",{staticClass:"setting"},[e("div",{staticClass:"setting-navbars"},[e("NavBars")],1),e("div",{staticClass:"setting-container"},[e("h4",[s._v("帳戶設定")]),e("form",{staticClass:"d-flex flex-column align-items-start"},[e("div",{staticClass:"setting-rwb"},[e("div",{staticClass:"set-input mb-2"},[e("label",{staticClass:"setting-label",attrs:{for:"account"}},[s._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.account,expression:"userInfo.account"}],staticClass:"setting-input",attrs:{name:"account",id:"account",type:"text",autofocus:""},domProps:{value:s.userInfo.account},on:{input:function(e){e.target.composing||s.$set(s.userInfo,"account",e.target.value)}}})]),e("div",{staticClass:"set-input mb-2"},[e("label",{staticClass:"setting-label",attrs:{for:"name"}},[s._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.name,expression:"userInfo.name"}],staticClass:"setting-input",attrs:{id:"name",name:"name",type:"text",autofocus:""},domProps:{value:s.userInfo.name},on:{input:function(e){e.target.composing||s.$set(s.userInfo,"name",e.target.value)}}})]),e("div",{staticClass:"set-input mb-2"},[e("label",{staticClass:"setting-label",attrs:{for:"email"}},[s._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.email,expression:"userInfo.email"}],staticClass:"setting-input",attrs:{name:"email",id:"email",type:"email",autofocus:""},domProps:{value:s.userInfo.email},on:{input:function(e){e.target.composing||s.$set(s.userInfo,"email",e.target.value)}}})]),e("div",{staticClass:"set-input mb-2"},[e("label",{staticClass:"setting-label",attrs:{for:"password"}},[s._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.password,expression:"userInfo.password"}],staticClass:"setting-input",attrs:{id:"password",name:"password",type:"password",autocomplete:"new-password"},domProps:{value:s.userInfo.password},on:{input:function(e){e.target.composing||s.$set(s.userInfo,"password",e.target.value)}}})]),e("div",{staticClass:"set-input mb-2"},[e("label",{staticClass:"setting-label",attrs:{for:"checkPassword"}},[s._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.userInfo.checkPassword,expression:"userInfo.checkPassword"}],staticClass:"setting-input",attrs:{id:"checkPassword",name:"checkPassword",type:"password",autocomplete:"new-password"},domProps:{value:s.userInfo.checkPassword},on:{input:function(e){e.target.composing||s.$set(s.userInfo,"checkPassword",e.target.value)}}})])]),e("div",{staticClass:"set-btn"},[e("button",{staticClass:"setting-btn mb-3",attrs:{type:"submit",disabled:s.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),s.handleSubmit.apply(null,arguments)}}},[s._v("儲存")])])])])])])},i=[],n=(t("d9e2"),t("14d9"),t("0baf")),r=t("4cce"),o=t("2fa3"),c=t("2f62"),u={components:{NavBars:n["a"]},data(){return{userInfo:{id:-1,account:"",name:"",email:"",password:"",checkPassword:""},isProcessing:!1}},created(){this.fetchUser()},methods:{fetchUser(){const{id:s,account:e,name:t,email:a}=this.currentUser;this.userInfo={...this.userInfo,id:s,account:e,name:t,email:a},this.isProcessing=!1},async handleSubmit(){try{this.isProcessing=!0;const{id:s,account:e,name:t,email:a,password:i,checkPassword:n}=this.userInfo;if(!e||!t||!a)return o["a"].fire({icon:"warning",title:"帳號、姓名與電子信箱為必填"}),void(this.isProcessing=!1);if(i!==n)return o["a"].fire({icon:"warning",title:"密碼與密碼確認內容須相同！"}),this.userInfo.checkPassword="",void(this.isProcessing=!1);if(-1!==e.indexOf(" "))return o["a"].fire({icon:"warning",title:"帳號不能有空格"}),void(this.isProcessing=!1);if(t.length>50)return o["a"].fire({icon:"warning",title:"名稱不能多於50字！"}),void(this.isProcessing=!1);if(-1===a.indexOf("@")||-1===a.indexOf(".com"))return o["a"].fire({icon:"warning",title:"email須含有@與.com等字元"}),void(this.isProcessing=!1);const{data:c}=await r["a"].editUserAccount({userID:s,account:e,name:t,email:a,password:i,checkPassword:n});if("error"===c.status)throw new Error(c.message);o["a"].fire({icon:"success",title:"成功更新資料"}),this.$store.dispatch("fetchCurrentUser"),this.$router.push({name:"User",params:{id:this.userInfo.id}}),this.isProcessing=!1}catch(s){console.log(s),this.isProcessing=!1,"This account name has been registered"===s.message?o["a"].fire({icon:"warning",title:"帳號已重覆註冊"}):"This email has been registered"===s.message?o["a"].fire({icon:"warning",title:"Email已重覆註冊"}):o["a"].fire({icon:"warning",title:"更新失敗，請稍後再試！"})}}},computed:{...Object(c["b"])(["currentUser"])},watch:{currentUser:{handler:function(){this.fetchUser()},deep:!0}}},l=u,d=(t("af1f"),t("2877")),m=Object(d["a"])(l,a,i,!1,null,null,null);e["default"]=m.exports},e0a3:function(s,e,t){}}]);
//# sourceMappingURL=chunk-63d133ea.80d2952d.js.map